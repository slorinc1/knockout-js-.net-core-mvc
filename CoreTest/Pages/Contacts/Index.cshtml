@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<link rel="stylesheet" type="text/css" href="~/css/contacts.css">

<div class='liveExample'> 
    
    <h2>Contacts</h2>
    <div id='contactsList'>
        <table class='contactsEditor'>
            <tr>
                <th>First name</th>
                <th>Last name</th>
                <th>Phone numbers</th>
            </tr>
            <tbody data-bind="foreach: contacts">
                <tr>
                    <td>
                        <input class="form-control" data-bind='value: firstName' />
                        <div><a class="btn btn-danger" href='#' data-bind='click: $root.removeContact'>Delete</a></div>
                    </td>
                    <td><input class="form-control" data-bind='value: lastName' /></td>
                    <td>
                        <table>
                            <tbody data-bind="foreach: phones">
                                <tr>
                               <td> <select class="form-control" data-bind='options: phoneTypes, optionsCaption: "Select...", value: type'> </select></td> 
                                    <td><input class="form-control" data-bind='value: number' /></td>
                                    <td><a class="btn btn-danger" href='#' data-bind='click: $root.removePhone'>Delete</a></td>
                                </tr>
                            </tbody>
                        </table>
                        <a class="btn btn-primary" href='#' data-bind='click: $root.addPhone'>Add number</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
     
    <p>
        <button class="btn btn-primary" data-bind='click: addContact'>Add a contact</button>
        <button class="btn btn-success" data-bind='click: save, enable: contacts().length > 0'>Save to JSON</button>
    </p>
     
    <textarea data-bind='value: lastSavedJson' rows='5' cols='60' disabled='disabled'> </textarea>
    
</div>
